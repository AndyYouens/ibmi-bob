#! /QOpenSys/pkgs/bin/bash

declare -A FILETARGETMAPPING;
FILETARGETMAPPING[CMDSRC]=CMD
FILETARGETMAPPING[DSPF]=FILE
FILETARGETMAPPING[LF]=FILE
FILETARGETMAPPING[PF]=FILE
FILETARGETMAPPING[PRTF]=FILE
FILETARGETMAPPING[MENUSRC]=MENU
FILETARGETMAPPING[C]=MODULE
FILETARGETMAPPING[RPGLE]=MODULE
FILETARGETMAPPING[CLLE]=MODULE
FILETARGETMAPPING[SQLC]=MODULE
FILETARGETMAPPING[SQLRPGLE]=MODULE
FILETARGETMAPPING[MODULE]=PGM
FILETARGETMAPPING[PGM.RPGLE]=PGM
FILETARGETMAPPING[PGM.C]=PGM
FILETARGETMAPPING[CBL]=PGM
FILETARGETMAPPING[RPG]=PGM
FILETARGETMAPPING[ILEPGM]=PGM
FILETARGETMAPPING[PNLGRPSRC]=PNLGRP
FILETARGETMAPPING[SQL]=QMQRY
FILETARGETMAPPING[BND]=SRVPGM
FILETARGETMAPPING[ILESRVPGM]=SRVPGM
FILETARGETMAPPING[BNDDIR]=BNDD
FILETARGETMAPPING[DTA]=DTA
FILETARGETMAPPING[SYSTRG]=TRG
FILETARGETMAPPING[SQLPRC]=SQL
FILETARGETMAPPING[TABLE]=SQL
FILETARGETMAPPING[VIEW]=SQL
FILETARGETMAPPING[SQLSEQ]=SQL
FILETARGETMAPPING[SQLUDF]=SQL
FILETARGETMAPPING[SQLTRG]=SQL
FILETARGETMAPPING[MSGF]=MSG
FILETARGETMAPPING[WSCSTSRC]=WSCST

get_target_from_srcfile() {
    local filename=$1
    for i in "${!FILETARGETMAPPING[@]}"
    do
        if [[ "$filename" == *.${i} ]]
        then
            targetName="${filename%.${i}}.${FILETARGETMAPPING[$i]}";
            echo ${targetName[$i]}
        fi
    done
}
